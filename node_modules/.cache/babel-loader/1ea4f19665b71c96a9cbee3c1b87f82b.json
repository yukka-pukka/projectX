{"ast":null,"code":"import _defineProperty from\"/Users/ada/capstone-scratch/Scratch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/ada/capstone-scratch/Scratch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/ada/capstone-scratch/Scratch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ada/capstone-scratch/Scratch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ada/capstone-scratch/Scratch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ada/capstone-scratch/Scratch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import firebase,{usersCollection}from\"../../utils/firebase\";import UserContext from\"../../UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={register:false,user:{email:\"\",password:\"\"}};_this.handleForm=function(e){e.preventDefault();var email=_this.state.user.email;var password=_this.state.user.password;if(_this.state.register){firebase.auth().createUserWithEmailAndPassword(email,password).then(function(response){// this.handleRegisterUser(user);\n_this.context.setUser(response.user);_this.props.history.push(\"/profile\");response.user.sendEmailVerification().then(function(){console.log(\"email verification sent\");});}).catch(function(error){console.log(error);});}else{firebase.auth().signInWithEmailAndPassword(email,password).then(function(response){console.log(response);_this.context.setUser(response.user);_this.props.history.push(\"/profile\");}).catch(function(error){console.log(error);});}};_this.changeHandler=function(e){var name=e.target.name;var value=e.target.value;_this.setState(function(prevState){return{user:_objectSpread(_objectSpread({},prevState.user),{},_defineProperty({},name,value))};});};_this.handleLogout=function(e){firebase.auth().signOut().then(function(){_this.props.history.push(\"/\",{message:\"You have been signed out\"});console.log(\"User logged out\");});};_this.handleGetUserInfo=function(){var getUser=firebase.auth().currentUser;if(getUser){console.log(getUser);}else{console.log(\"No User\");}};return _this;}_createClass(LoginForm,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){return _this2.handleForm(event);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",onChange:function onChange(event){return _this2.changeHandler(event);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",onChange:function onChange(event){return _this2.changeHandler(event);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:this.state.register?\"Register\":\"Sign in\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleLogout();},children:\"Logout\"})]});}}]);return LoginForm;}(Component);LoginForm.contextType=UserContext;export default LoginForm;","map":{"version":3,"sources":["/Users/ada/capstone-scratch/Scratch/src/components/user/form.js"],"names":["React","Component","firebase","usersCollection","UserContext","LoginForm","state","register","user","email","password","handleForm","e","preventDefault","auth","createUserWithEmailAndPassword","then","response","context","setUser","props","history","push","sendEmailVerification","console","log","catch","error","signInWithEmailAndPassword","changeHandler","name","target","value","setState","prevState","handleLogout","signOut","message","handleGetUserInfo","getUser","currentUser","event","contextType"],"mappings":"64BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,QAAP,EAAmBC,eAAnB,KAA0C,sBAA1C,CACA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,C,gJAEMC,CAAAA,S,uUACJC,K,CAAQ,CACNC,QAAQ,CAAE,KADJ,CAENC,IAAI,CAAE,CACJC,KAAK,CAAE,EADH,CAEJC,QAAQ,CAAE,EAFN,CAFA,C,OASRC,U,CAAa,SAACC,CAAD,CAAO,CAClBA,CAAC,CAACC,cAAF,GACA,GAAMJ,CAAAA,KAAK,CAAG,MAAKH,KAAL,CAAWE,IAAX,CAAgBC,KAA9B,CACA,GAAMC,CAAAA,QAAQ,CAAG,MAAKJ,KAAL,CAAWE,IAAX,CAAgBE,QAAjC,CAEA,GAAI,MAAKJ,KAAL,CAAWC,QAAf,CAAyB,CACvBL,QAAQ,CACLY,IADH,GAEGC,8BAFH,CAEkCN,KAFlC,CAEyCC,QAFzC,EAGGM,IAHH,CAGQ,SAACC,QAAD,CAAc,CAClB;AACA,MAAKC,OAAL,CAAaC,OAAb,CAAqBF,QAAQ,CAACT,IAA9B,EACA,MAAKY,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EAEAL,QAAQ,CAACT,IAAT,CAAce,qBAAd,GAAsCP,IAAtC,CAA2C,UAAM,CAC/CQ,OAAO,CAACC,GAAR,CAAY,yBAAZ,EACD,CAFD,EAGD,CAXH,EAYGC,KAZH,CAYS,SAACC,KAAD,CAAW,CAChBH,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACD,CAdH,EAeD,CAhBD,IAgBO,CACLzB,QAAQ,CACLY,IADH,GAEGc,0BAFH,CAE8BnB,KAF9B,CAEqCC,QAFrC,EAGGM,IAHH,CAGQ,SAACC,QAAD,CAAc,CAClBO,OAAO,CAACC,GAAR,CAAYR,QAAZ,EACA,MAAKC,OAAL,CAAaC,OAAb,CAAqBF,QAAQ,CAACT,IAA9B,EACA,MAAKY,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EACD,CAPH,EAQGI,KARH,CAQS,SAACC,KAAD,CAAW,CAChBH,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACD,CAVH,EAWD,CACF,C,OAEDE,a,CAAgB,SAACjB,CAAD,CAAO,CACrB,GAAIkB,CAAAA,IAAI,CAAGlB,CAAC,CAACmB,MAAF,CAASD,IAApB,CACA,GAAIE,CAAAA,KAAK,CAAGpB,CAAC,CAACmB,MAAF,CAASC,KAArB,CACA,MAAKC,QAAL,CAAc,SAACC,SAAD,QAAgB,CAC5B1B,IAAI,gCACC0B,SAAS,CAAC1B,IADX,wBAEDsB,IAFC,CAEME,KAFN,EADwB,CAAhB,EAAd,EAMD,C,OAGDG,Y,CAAe,SAACvB,CAAD,CAAO,CACpBV,QAAQ,CACLY,IADH,GAEGsB,OAFH,GAGGpB,IAHH,CAGQ,UAAM,CACR,MAAKI,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,CAA6B,CAAEe,OAAO,CAAE,0BAAX,CAA7B,EACFb,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACD,CANH,EAOD,C,OAEDa,iB,CAAoB,UAAM,CACxB,GAAIC,CAAAA,OAAO,CAAGrC,QAAQ,CAACY,IAAT,GAAgB0B,WAA9B,CACA,GAAID,OAAJ,CAAa,CACXf,OAAO,CAACC,GAAR,CAAYc,OAAZ,EACD,CAFD,IAEO,CACLf,OAAO,CAACC,GAAR,CAAY,SAAZ,EACD,CACF,C,2DAED,iBAAS,iBACP,mBACE,wCACE,cAAM,QAAQ,CAAE,kBAACgB,KAAD,QAAW,CAAA,MAAI,CAAC9B,UAAL,CAAgB8B,KAAhB,CAAX,EAAhB,wBACE,aAAK,SAAS,CAAC,YAAf,wBACE,gCADF,cAEE,cACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAC,cAFZ,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAE,kBAACA,KAAD,QAAW,CAAA,MAAI,CAACZ,aAAL,CAAmBY,KAAnB,CAAX,EAJZ,EAFF,GADF,cAWE,aAAK,SAAS,CAAC,YAAf,wBACE,mCADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,kBAACA,KAAD,QAAW,CAAA,MAAI,CAACZ,aAAL,CAAmBY,KAAnB,CAAX,EAJZ,EAFF,GAXF,cAqBE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,UACG,KAAKnC,KAAL,CAAWC,QAAX,CAAsB,UAAtB,CAAmC,SADtC,EArBF,GADF,cA0BE,aA1BF,cA2BE,eAAQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC4B,YAAL,EAAN,EAAjB,oBA3BF,GADF,CA+BD,C,uBA7GqBlC,S,EAgHxBI,SAAS,CAACqC,WAAV,CAAwBtC,WAAxB,CAEA,cAAeC,CAAAA,SAAf","sourcesContent":["import React, { Component } from \"react\";\nimport firebase, { usersCollection } from \"../../utils/firebase\";\nimport UserContext from \"../../UserContext\";\n\nclass LoginForm extends Component {\n  state = {\n    register: false,\n    user: {\n      email: \"\",\n      password: \"\",\n    },\n  };\n\n  // event handler function\n  handleForm = (e) => {\n    e.preventDefault();\n    const email = this.state.user.email;\n    const password = this.state.user.password;\n\n    if (this.state.register) {\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(email, password)\n        .then((response) => {\n          // this.handleRegisterUser(user);\n          this.context.setUser(response.user);\n          this.props.history.push(\"/profile\");\n\n          response.user.sendEmailVerification().then(() => {\n            console.log(\"email verification sent\");\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    } else {\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(email, password)\n        .then((response) => {\n          console.log(response);\n          this.context.setUser(response.user);\n          this.props.history.push(\"/profile\");\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  };\n\n  changeHandler = (e) => {\n    let name = e.target.name;\n    let value = e.target.value;\n    this.setState((prevState) => ({\n      user: {\n        ...prevState.user,\n        [name]: value,\n      },\n    }));\n  };\n\n  // logs a customer out if they are logged in\n  handleLogout = (e) => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n          this.props.history.push(\"/\", { message: \"You have been signed out\" })\n        console.log(\"User logged out\");\n      });\n  };\n\n  handleGetUserInfo = () => {\n    let getUser = firebase.auth().currentUser;\n    if (getUser) {\n      console.log(getUser);\n    } else {\n      console.log(\"No User\");\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <form onSubmit={(event) => this.handleForm(event)}>\n          <div className=\"form-group\">\n            <label>Email</label>\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              name=\"email\"\n              onChange={(event) => this.changeHandler(event)}\n            ></input>\n          </div>\n\n          <div className=\"form-group\">\n            <label>Password</label>\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              onChange={(event) => this.changeHandler(event)}\n            ></input>\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-primary\">\n            {this.state.register ? \"Register\" : \"Sign in\"}\n          </button>\n        </form>\n        <hr />\n        <button onClick={() => this.handleLogout()}>Logout</button>\n      </>\n    );\n  }\n}\n\nLoginForm.contextType = UserContext;\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}