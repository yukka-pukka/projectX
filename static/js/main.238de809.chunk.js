(this.webpackJsonpcapstonefiles=this.webpackJsonpcapstonefiles||[]).push([[0],{41:function(e,t){},55:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),r=a(25),i=a.n(r),c=a(26),o=a(15),l=a(8),u=a(3),j=function(){return Object(u.jsx)("header",{children:Object(u.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark  fixed-top bg-dark",children:[Object(u.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Dine for a Cause"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarCollapse",children:Object(u.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(u.jsx)("li",{className:"nav-item active",children:Object(u.jsx)(o.b,{className:"nav-link",to:"/",children:"Home"})}),Object(u.jsx)("li",{className:"nav-item active",children:Object(u.jsx)(o.b,{className:"nav-link",to:"/restaurants",children:"Restaurants"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(o.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(u.jsx)("li",{className:"nav-item active",children:Object(u.jsx)(o.b,{className:"nav-link",to:"/reviews",children:"Ratings"})}),Object(u.jsx)("li",{className:"nav-item active",children:Object(u.jsx)(o.b,{className:"nav-link",to:"/profile",children:"Profile"})})]})})]})})},b=function(){return Object(u.jsxs)("footer",{className:"container",children:[Object(u.jsx)("p",{className:"float-right",children:Object(u.jsx)(o.b,{to:"#",children:"Back to top"})}),Object(u.jsxs)("p",{children:["\xa9 2017-2019 Company, Inc. \xb7 ",Object(u.jsx)(o.b,{to:"#",children:"Privacy"})," \xb7 ",Object(u.jsx)(o.b,{to:"#",children:"Terms"})]})]})},d=a(29),h=a(41),m=a.n(h),v=a(35),p=s.a.createContext({user:void 0,setUser:function(){}}),O={width:"90vw",height:"90vh"},g={lat:47.620084,lng:-122.320126},x={styles:m.a,disableDefaultUI:!0,zoomControl:!0};var f=function(e){var t=s.a.useContext(p).user,a=Object(n.useState)([]),r=Object(c.a)(a,2),i=r[0],o=r[1];console.log(i&&i.filter((function(e){return!e.Location.lng})));var l=function(e){v.a.database().ref("Restaurants").on("value",(function(t){var a=Array.from(t.val()).filter((function(t,a,n){return t.Name.toLowerCase().includes(e)}));o(a)}))},j=Object(d.d)({googleMapsApiKey:"AIzaSyDT8sMv5C1rgTcf21qZ3JOtnpLXCWnIWVE"}),b=j.isLoaded,h=j.loadError,m=s.a.useState(null),f=Object(c.a)(m,2),y=f[0],w=f[1],N=s.a.useState(new URLSearchParams(e.location.search).get("q")||""),C=Object(c.a)(N,2),k=C[0],S=C[1];return s.a.useEffect((function(){l(k)}),[]),h?"Error loading maps":Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(k)},children:[Object(u.jsx)("input",{type:"button",onClick:function(){var e=v.a.database().ref("Searches");e.set({restaurants:i,userID:t.uid,query:k}),e.get().then((function(e){console.log("saved searches",e.val())})),console.log(i)},value:"Save Search",disabled:!t}),Object(u.jsx)("input",{onInput:function(e){console.log(e.target.value),S(e.target.value)},type:"search",value:k})]}),b&&Object(u.jsxs)(d.a,{mapContainerStyle:O,zoom:13,center:g,options:x,id:"marker-example",children:[i.map((function(e){return Object(u.jsx)(d.c,{position:{lat:e.Location.lat,lng:e.Location.lng},onClick:function(){w(e)}},e.Name)})),y?Object(u.jsx)(d.b,{position:{lat:y.Location.lat,lng:y.Location.lng},onCloseClick:function(){w(null)},children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("h2",{children:[" ",y.Name," "]}),Object(u.jsx)("p",{children:y.Address})]})}):null]})]})},y=a(9),w=a(13),N=a(14),C=a(24),k=a(19),S=a(18),I=a(23),F=(a(55),function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={rating:n.props.rating},n}return Object(N.a)(a,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){t.push(Object(u.jsx)("svg",{height:"25",width:"23",value:"3.5",className:"star rating-stars"+(e.state.rating>a?" checked":""),"data-rating":e.props.rating,onClick:function(){e.setState({rating:a+1}),e.props.onClick(a+1)},children:Object(u.jsx)("polygon",{points:"9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78"})},a))},n=0;n<5;n++)a(n);return Object(u.jsxs)("div",{className:"rating",children:[Object(u.jsx)("span",{className:"rating__prefix font-size-small",children:"Review"}),Object(u.jsx)("input",{type:"hidden",name:"rating",value:this.props.rating}),Object(u.jsx)("input",{type:"text",value:this.props.name,name:"name",placeholder:"Naam",onChange:this.handleInputChange}),t]})}}]),a}(n.Component)),A=function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).state={isActive:!1,isSubmitted:!1,rating:0,name:"",review:""},e.handleInputChange=e.handleInputChange.bind(Object(C.a)(e)),e}return Object(N.a)(a,[{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"review-form bg-white content-padding block-margin-top",children:Object(u.jsxs)("form",{className:this.state.isActive?"":"hide",onSubmit:this.props.submitForm,children:[this.props.validation,Object(u.jsx)("textarea",{name:"review",value:this.props.review,placeholder:"Put your review here.",onChange:this.handleInputChange}),Object(u.jsx)(F,{rating:this.state.rating,onClick:function(t){return e.setState(Object(y.a)(Object(y.a)({},e.state),{},{rating:t}))}}),";",Object(u.jsx)("button",{className:"button",type:"submit",value:"Submit",children:"Submit"})]})})}},{key:"showForm",value:function(){this.setState(Object(y.a)(Object(y.a)({},this.state),{},{isActive:!0}))}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(y.a)(Object(y.a)({},this.state),{},Object(I.a)({},n,a)))}}]),a}(n.Component),L=function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return Object(u.jsx)("ul",{className:"reviews__list",children:this.props.reviews.sort((function(e,t){return t.date-e.date})).map((function(e,t){return Object(u.jsx)(A,Object(y.a)({index:t},e))}))})}}]),a}(n.Component),D=function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).state={reviews:[{rating:2,name:"Laleeba",review:"Aweful Place.\n\n Food is disgusting.",date:new Date((new Date).setDate((new Date).getDate()-10))}],validation:""},e.submitForm=e.submitForm.bind(Object(C.a)(e)),e}return Object(N.a)(a,[{key:"render",value:function(){return Object(u.jsx)("div",{className:"bg-light-gray global-padding-bottom",children:Object(u.jsxs)("section",{className:"reviews",children:[Object(u.jsx)("header",{className:"hero bg-black text-color-white global-padding-vertical overlay",children:Object(u.jsx)("div",{className:"area align-center text-center row",children:Object(u.jsxs)("h1",{className:"small-12 medium-6 columns",children:[Object(u.jsx)("span",{className:"font-weight-regular",children:"Reviews and ratings"}),Object(u.jsx)("br",{})]})})}),Object(u.jsx)("div",{className:"row align-center content-margin-top-negative",children:Object(u.jsxs)("div",{className:"small-12 medium-8 large-6 columns",children:[Object(u.jsx)("div",{className:"content-padding bg-white area",children:Object(u.jsx)("p",{className:"font-size-medium",children:"Please share your experience!\xa0"})}),this.renderForm(),this.renderReviews()]})})]})})}},{key:"renderList",value:function(){return Object(u.jsx)(L,{reviews:this.state.reviews})}},{key:"renderForm",value:function(){return Object(u.jsx)(A,{submitForm:this.submitForm,validation:this.state.validation})}},{key:"renderReviews",value:function(){return this.state.reviews.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[" ",e.name]}),Object(u.jsxs)("div",{children:[" ",e.review]}),Object(u.jsxs)("div",{children:[" ",e.rating]})]})}))}},{key:"submitForm",value:function(e){e.preventDefault();var t=this.state.reviews.slice();this.setState(Object(y.a)(Object(y.a)({},this.state),{},{validation:""})),t.push({rating:parseInt(e.target.rating.value),name:e.target.name.value,review:e.target.review.value,date:new Date}),console.log(t),this.setState(Object(y.a)(Object(y.a)({},this.state),{},{reviews:t,validation:""}))}}]),a}(n.Component),P=a(28);a(56),a(57);P.a.initializeApp({apiKey:"AIzaSyABg265GZXoXGziI7VbMm_SsPT3zJ_syNI",authDomain:"yuliacapstone.firebaseapp.com",projectId:"yuliacapstone",storageBucket:"yuliacapstone.appspot.com",messagingSenderId:"79249118421",appId:"1:79249118421:web:68288a1cf89de26664fe5c",measurementId:"G-7970H4F1F7"}),P.a.auth();var U=P.a.firestore(),E=(U.collection("restaurants"),U.collection("users"),P.a),R=function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={register:!1,user:{email:"",password:""}},e.handleForm=function(t){t.preventDefault();var a=e.state.user.email,n=e.state.user.password;e.state.register?E.auth().createUserWithEmailAndPassword(a,n).then((function(t){e.context.setUser(t.user),e.props.history.push("/profile"),t.user.sendEmailVerification().then((function(){console.log("email verification sent")}))})).catch((function(e){console.log(e)})):E.auth().signInWithEmailAndPassword(a,n).then((function(t){console.log(t),e.context.setUser(t.user),e.props.history.push("/profile")})).catch((function(e){console.log(e)}))},e.changeHandler=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){return{user:Object(y.a)(Object(y.a)({},e.user),{},Object(I.a)({},a,n))}}))},e.handleLogout=function(t){E.auth().signOut().then((function(){e.props.history.push("/",{message:"You have been signed out"}),console.log("User logged out")}))},e.handleGetUserInfo=function(){var e=E.auth().currentUser;e?console.log(e):console.log("No User")},e}return Object(N.a)(a,[{key:"render",value:function(){var e=this;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{onSubmit:function(t){return e.handleForm(t)},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Email"}),Object(u.jsx)("input",{type:"email",className:"form-control",name:"email",onChange:function(t){return e.changeHandler(t)}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:function(t){return e.changeHandler(t)}})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",children:this.state.register?"Register":"Sign in"})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("button",{onClick:function(){return e.handleLogout()},children:"Logout"})]})}}]),a}(n.Component);R.contextType=p;var z=R,_=function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return Object(u.jsx)(z,{history:this.props.history})}}]),a}(n.Component),H=function(){var e=s.a.useContext(p).user;return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",margin:"15 px 0px"},children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{style:{width:"160px",height:" 160 px",borderRadius:"80px"}})}),Object(u.jsx)("div",{children:Object(u.jsxs)("h4",{children:["Welcome ",e.email]})}),Object(u.jsx)("div",{children:Object(u.jsx)("h5",{children:"Favorites"})})]})})},T=a(42);var M=function(e){var t=e.children,a=Object(T.a)(e,["children"]),n=s.a.useContext(p).user;return console.log("private route user",n),Object(u.jsx)(l.b,Object(y.a)(Object(y.a)({},a),{},{render:function(e){var a=e.location;return n?t:Object(u.jsx)(l.a,{to:{pathname:"/login",state:{from:a}}})}}))},W=function(){return Object(u.jsxs)(o.a,{children:[Object(u.jsx)(j,{}),Object(u.jsx)("main",{role:"main",className:"container myMain",children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/",children:function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Home!"}),Object(u.jsx)("img",{src:"/heart.jpg",className:"image_style"}),e.location.state&&e.location.state.message&&Object(u.jsx)("div",{className:"alert alert-primary",children:e.location.state.message})]})}}),Object(u.jsx)(l.b,{exact:!0,path:"/restaurants",component:f}),Object(u.jsx)(l.b,{exact:!0,path:"/login",component:_}),Object(u.jsx)(l.b,{exact:!0,path:"/reviews",component:D}),Object(u.jsx)(M,{path:"/profile",children:Object(u.jsx)(H,{})})]})}),Object(u.jsx)(b,{})]})},B=function(){var e=s.a.useState(void 0),t=Object(c.a)(e,2),a=t[0],n=t[1];return s.a.useEffect((function(){E.auth().onAuthStateChanged((function(e){n(e),e?(console.log(e.email),console.log(e.uid)):console.log("no user logged in")}))}),[]),Object(u.jsx)(p.Provider,{value:{user:a,setUser:n},children:Object(u.jsx)(W,{})})};i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(B,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.238de809.chunk.js.map